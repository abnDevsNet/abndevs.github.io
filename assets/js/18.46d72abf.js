(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{290:function(t,a,s){"use strict";s.r(a);var e=s(14),n=Object(e.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"plan-model"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#plan-model"}},[t._v("#")]),t._v(" Plan Model")]),t._v(" "),a("p"),a("div",{staticClass:"table-of-contents"},[a("ul",[a("li",[a("a",{attrs:{href:"#create-a-plan"}},[t._v("Create a Plan")])]),a("li",[a("a",{attrs:{href:"#get-plan-details"}},[t._v("Get Plan details")])]),a("li",[a("a",{attrs:{href:"#trial-modes"}},[t._v("Trial modes")]),a("ul",[a("li",[a("a",{attrs:{href:"#if-plan-has-trial"}},[t._v("If plan has trial")])]),a("li",[a("a",{attrs:{href:"#if-plan-does-not-have-trial"}},[t._v("If plan does not have trial")])]),a("li",[a("a",{attrs:{href:"#trial-period-time-related-functions"}},[t._v("Trial period time related functions")])])])]),a("li",[a("a",{attrs:{href:"#tiers"}},[t._v("Tiers")]),a("ul",[a("li",[a("a",{attrs:{href:"#example"}},[t._v("Example")])])])]),a("li",[a("a",{attrs:{href:"#grace"}},[t._v("Grace")]),a("ul",[a("li",[a("a",{attrs:{href:"#grace-related-functions"}},[t._v("Grace related functions")])])])]),a("li",[a("a",{attrs:{href:"#subscription-period-time-related-functions"}},[t._v("Subscription period time related functions")])])])]),a("p"),t._v(" "),a("p",[t._v("This is the main model of the package, there is nothing without plans. After creating a plan, you\ncan "),a("RouterLink",{attrs:{to:"/packages/laravel-subscriptions/models/plan-subscription-model.html#create-a-subscription"}},[t._v("attach it to a subscription")]),t._v(".")],1),t._v(" "),a("h2",{attrs:{id:"create-a-plan"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#create-a-plan"}},[t._v("#")]),t._v(" Create a Plan")]),t._v(" "),a("div",{staticClass:"language-php extra-class"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("use")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token package"}},[t._v("AbnDevs"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Subscriptions"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Models"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Plan")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$plan")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name static-context"}},[t._v("Plan")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("::")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("create")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'tag'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'basic'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'name'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'Basic Plan'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'description'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'For small businesses'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'price'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("9.99")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'signup_fee'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.99")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'invoice_period'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'invoice_interval'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'month'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'trial_period'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("15")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'trial_interval'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'day'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'grace_period'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'grace_interval'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'day'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'tier'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'currency'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'EUR'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h2",{attrs:{id:"get-plan-details"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#get-plan-details"}},[t._v("#")]),t._v(" Get Plan details")]),t._v(" "),a("p",[t._v("You can query the plan for further details as follows:")]),t._v(" "),a("div",{staticClass:"language-php extra-class"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$plan")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name static-context"}},[t._v("Plan")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("::")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("find")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Or querying by tag")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$plan")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name static-context"}},[t._v("Plan")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("::")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getByTag")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'basic'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Get all plan features                ")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$plan")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("features")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Get all plan subscriptions")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$plan")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("subscriptions")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Get all plan combinations")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$plan")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("combinations")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Check if the plan is free")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$plan")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("isFree")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Check if the plan has trial period")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$plan")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("hasTrial")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n")])])]),a("p",[t._v("Both "),a("code",[t._v("$plan->features")]),t._v(" and "),a("code",[t._v("$plan->subscriptions")]),t._v(" are collections, driven from relationships, and thus you can query\nthese relations as any normal Eloquent relationship. E.g. "),a("code",[t._v("$plan->features()->where('tag', 'social_profiles')->first()")]),t._v("\nor "),a("code",[t._v("$plan->getFeatureByTag('social_profiles')")]),t._v(".")]),t._v(" "),a("p",[t._v("Also read:")]),t._v(" "),a("ul",[a("li",[a("RouterLink",{attrs:{to:"/packages/laravel-subscriptions/models/plan-feature-model.html#get-plan-feature-value"}},[t._v("Get Plan Feature value")])],1)]),t._v(" "),a("h2",{attrs:{id:"trial-modes"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#trial-modes"}},[t._v("#")]),t._v(" Trial modes")]),t._v(" "),a("p",[t._v("There are two available trial modes: "),a("code",[t._v("inside")]),t._v(" or "),a("code",[t._v("outside")]),t._v(". This defines how the trial will be counted when renewal time\nis due.")]),t._v(" "),a("p",[a("strong",[t._v("USAGE WILL NOT BE CLEARED")]),t._v(" when user has had trial time. This is what gives sense to both methods.")]),t._v(" "),a("p",[t._v("When a "),a("strong",[t._v("new subscription")]),t._v(" to a plan is made:")]),t._v(" "),a("h3",{attrs:{id:"if-plan-has-trial"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#if-plan-has-trial"}},[t._v("#")]),t._v(" If plan has trial")]),t._v(" "),a("p",[t._v("If plan has trial, subscriber does not have subscription but only a trial. Subscription period starts and ends at "),a("code",[t._v("null")]),t._v("\nand this is considered subscription is not made. Because in a real case scenario, when a subscriber has a trial it does\nnot have a subscription yet, so the invoice period is made and charged after the trial has ended.")]),t._v(" "),a("h4",{attrs:{id:"renewal-when-trial-is-inside"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#renewal-when-trial-is-inside"}},[t._v("#")]),t._v(' Renewal when trial is "inside"')]),t._v(" "),a("p",[t._v("If trial mode is "),a("code",[t._v("inside")]),t._v("; when trial ends and is renewed invoice period will have substracted the days of trial that\nhave been used.")]),t._v(" "),a("p",[a("em",[t._v("Example:")]),t._v(" 7 day trial in a 30 day subscription period.")]),t._v(" "),a("ul",[a("li",[t._v("User uses 3 days, likes the app them and renews the subscription. "),a("strong",[t._v("Result:")]),t._v(" The next subscription renewal will be in\n27 days.")]),t._v(" "),a("li",[t._v("User uses all 7 day trial. Forgets about the app and comes back a week later. "),a("strong",[t._v("Result:")]),t._v(" The next subscription\nrenewal will be in 23 days.")])]),t._v(" "),a("p",[t._v("In summary: this is "),a("strong",[t._v("NOT")]),t._v(" a free trial. User always ends up paying the full price for full period.")]),t._v(" "),a("h4",{attrs:{id:"renewal-when-trial-is-outside"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#renewal-when-trial-is-outside"}},[t._v("#")]),t._v(' Renewal when trial is "outside"')]),t._v(" "),a("p",[t._v("If trial mode is "),a("code",[t._v("outside")]),t._v("; when trial ends and is renewed, invoice period will start at the moment it's renewed.")]),t._v(" "),a("p",[a("em",[t._v("Example:")]),t._v(" 7 day trial in a 30 day subscription period.")]),t._v(" "),a("ul",[a("li",[t._v("User uses 3 days, likes the app them and renews the subscription. "),a("strong",[t._v("Result:")]),t._v(" The next subscription renewal will be in\n30 days. User got 3 days for free.")]),t._v(" "),a("li",[t._v("User uses all 7 day trial. Forgets about the app and comes back a week later. "),a("strong",[t._v("Result:")]),t._v(" The next subscription\nrenewal will be in 30 days. User got 7 days for free.")])]),t._v(" "),a("p",[t._v("In summary: this is "),a("strong",[t._v("IS")]),t._v(" a free trial. User does not pay for the trial period, but for the next subscription period.")]),t._v(" "),a("h3",{attrs:{id:"if-plan-does-not-have-trial"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#if-plan-does-not-have-trial"}},[t._v("#")]),t._v(" If plan does not have trial")]),t._v(" "),a("p",[t._v("If plan does not have trial, subscriber has subscription. Because when a plan does not have trial, a new subscription\nactivates a new invoicing period.")]),t._v(" "),a("h3",{attrs:{id:"trial-period-time-related-functions"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#trial-period-time-related-functions"}},[t._v("#")]),t._v(" Trial period time related functions")]),t._v(" "),a("p",[t._v("You can get some information about duration of your trial with:")]),t._v(" "),a("div",{staticClass:"language-php extra-class"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$plan")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getTrialTotalDurationIn")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'day'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Returns number of days trial lasts")]),t._v("\n")])])]),a("p",[t._v("You can use Carbon accepted intervals (in singular): "),a("code",[t._v("year")]),t._v(","),a("code",[t._v("month")]),t._v(","),a("code",[t._v("day")]),t._v(","),a("code",[t._v("hour")]),t._v(","),a("code",[t._v("minute")]),t._v(","),a("code",[t._v("second")]),t._v(","),a("code",[t._v("microsecond")]),t._v("...")]),t._v(" "),a("h2",{attrs:{id:"tiers"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#tiers"}},[t._v("#")]),t._v(" Tiers")]),t._v(" "),a("p",[t._v("The use of tiers is "),a("strong",[t._v("optional")]),t._v('. Usually a tier is a "level" of subscription.')]),t._v(" "),a("p",[t._v("It helps with upgrading or downgrading because usually an upgrade is changed, billed and renewed instantly, and a\ndowngrade is changed and billed at the end of period (\nsee "),a("a",{attrs:{href:"https://github.com/abndevs/laravel-subscriptions-schedule",target:"_blank",rel:"noopener noreferrer"}},[t._v("laravel-subscriptions-schedule"),a("OutboundLink")],1),t._v(").")]),t._v(" "),a("h3",{attrs:{id:"example"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#example"}},[t._v("#")]),t._v(" Example")]),t._v(" "),a("p",[t._v("The way it's thought is:")]),t._v(" "),a("p",[t._v("You have 3 plans: "),a("strong",[t._v("Basic")]),t._v(", "),a("strong",[t._v("Intermediate")]),t._v(" and "),a("strong",[t._v("Pro")]),t._v(". How do you now which is better than the other? You can look\nat the price.")]),t._v(" "),a("p",[t._v("But... what if there is a promo during some time and the price of "),a("strong",[t._v("Intermediate")]),t._v(" is lower now than "),a("strong",[t._v("Basic")]),t._v(" will be\nnext month when there is no promo? When you change the subscription plan from your promo "),a("strong",[t._v("Intermediate")]),t._v(" to "),a("strong",[t._v("Basic")]),t._v("\nnormally would be a downgrade, but now prices are reversed and action is an upgrade. Weird, huh?")]),t._v(" "),a("p",[t._v("What if you customize your user subscription and now it is somewhere in the middle between "),a("strong",[t._v("Intermediate")]),t._v(" and "),a("strong",[t._v("Pro")]),t._v("?\nYou can change the tier to a number in between, so you know what to do when changing (downgrading) to existing\nIntermediate or upgrading to Pro.")]),t._v(" "),a("p",[t._v("Comparing tier numbers, you can know which subscription or plan is superior to another.")]),t._v(" "),a("div",{staticClass:"language-php extra-class"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Example comparing current plan subscription to another plan")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$user")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("subscription")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'main'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("tier")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$newPlan")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("tier")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("myUpgradeFunction")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("myDowngradeFunction")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h2",{attrs:{id:"grace"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#grace"}},[t._v("#")]),t._v(" Grace")]),t._v(" "),a("p",[t._v("Grace period is the extra time the subscription will be considered active after it has ended. By default is disabled,\nyou can set it when creating the plan with a "),a("code",[t._v("grace_period")]),t._v(" and "),a("code",[t._v("grace_interval")]),t._v(". It will be inherited by new subscriptions\nand also will be synchronized when using "),a("code",[t._v("syncPlan")]),t._v(".")]),t._v(" "),a("h3",{attrs:{id:"grace-related-functions"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#grace-related-functions"}},[t._v("#")]),t._v(" Grace related functions")]),t._v(" "),a("div",{staticClass:"language-php extra-class"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$plan")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("hasGrace")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Returns boolean indicating if plan has grace period")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$plan")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getGraceTotalDurationIn")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'day'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Returns duration integer in set Carbon interval (second, day, month...)")]),t._v("\n")])])]),a("h2",{attrs:{id:"subscription-period-time-related-functions"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#subscription-period-time-related-functions"}},[t._v("#")]),t._v(" Subscription period time related functions")]),t._v(" "),a("p",[t._v("You can get some information about duration of the subscription with:")]),t._v(" "),a("div",{staticClass:"language-php extra-class"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$plan")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getSubscriptionTotalDurationIn")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'day'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Returns number of days subscription lasts")]),t._v("\n")])])]),a("p",[t._v("You can use Carbon accepted intervals (in singular): "),a("code",[t._v("year")]),t._v(","),a("code",[t._v("month")]),t._v(","),a("code",[t._v("day")]),t._v(","),a("code",[t._v("hour")]),t._v(","),a("code",[t._v("minute")]),t._v(","),a("code",[t._v("second")]),t._v(","),a("code",[t._v("microsecond")]),t._v("...")])])}),[],!1,null,null,null);a.default=n.exports}}]);